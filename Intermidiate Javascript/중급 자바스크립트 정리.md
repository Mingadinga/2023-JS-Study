# 호이스팅
영상만으로는 명쾌한 이해가 어려워서 구글링을 하다가 [좋은 글](https://tecoble.techcourse.co.kr/post/2021-04-25-hoisting/)을 발견하여 참고했다.

## 호이스팅이란?
호이스팅은 **변수, 함수의 선언부가 위치한 인접 스코프의 시작 지점에서 해당 식별자의 관측이 가능한 현상**이다. 실행 시점으로 넘어가기 전에 선언된 식별자에 대한 정보를 이미 알고 있기 때문에 스코프의 어느 지점이든 관련된 함수나 변수를 참조할 수 있다. 선언 전에 사용하는 코드가 정상 동작한다. (충격)
```javascript
console.log(name);
var name = 'Mike';
```

## 호이스팅 규칙
함수/변수에 따라 다른 규칙이 적용된다.
1. 선언된 함수는 상단에서 참조, 호출이 가능하다.
2. 선언된 var 는 상단에서 참조, 할당이 가능하다.
3. 선언된 let , const 는 상단에서 참조, 할당이 불가능하다.


## 함수 호이스팅

함수 선언식은 식별자가 수집될 때 함수 참조에 대한 초기화까지 자동으로 이루어진다. 그래서 선언된 함수는 상단에서 참조, 호출이 가능하다.
```javascript
output1(); // output : jung min
function output1() {
	console.log('jung min');
}
```

함수 표현식은 결국 함수를 변수에 할당하는 것이므로 변수 호이스팅 사례로 볼 수 있다.
아래 에제에서는 output1에 메모리는 할당되었지만 값이 undefined이므로 TypeError가 발생했다.
output1에 함수를 할당하여 초기화하고 호출하면 정상 작동한다.
```javascript
output1(); // Uncaught TypeError: output1 is not a function
var output1 = function() {
	console.log('jung min');
}
```


## 변수 호이스팅

변수는 다음과 같이 세 가지 단계를 거쳐 사용된다.
1. 선언 : 파싱 과정에서 변수 객체가 변수에 대한 식별자를 수집한다.
2. 초기화 : 식별자에 메모리를 할당하고 undefined 상태를 부여한다.
3. 할당 : 변수에 직접 값을 할당한다.

var과 let, const는 호이스팅이 발생하는 시점에 다른 현상이 발생한다.
1. var : 호이스팅이 발생하면 선언과 초기화가 거의 동시에 발생한다. 스코프 상단에서 메모리가 할당되어 있으므로 참조(undefined 상태)와 할당이 가능하다.
2. let, const : 호이스팅이 발생하면 선언만 이루어지고 초기화가 이루어지지 않는다. 변수에 값을 직접 초기화하는 코드를 읽을 때까지 메모리가 할당되지 않기 때문에, 스코프 시작 부분과 실질적 선언부 부분 사이에 간극이 존재한다. 이 부분을 TDZ(Temporal Dead Zone)이라고 한다.

```javascript
{
  /*
   * Temporal Dead Zone of a
   * a는 이 구간에서 참조할 수 없다.
   * console.log(a) // Reference Error
   */
  let a;
}
```

